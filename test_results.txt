Traceback (most recent call last):
  File "C:\Users\soufi\Desktop\newsia (1)\test_newsapi.py", line 828, in main
    await tester.run_all_tests(categories=only_categories)
  File "C:\Users\soufi\Desktop\newsia (1)\test_newsapi.py", line 795, in run_all_tests
    await test_method()
  File "C:\Users\soufi\Desktop\newsia (1)\test_newsapi.py", line 548, in test_sentiment_endpoints
    print("\U0001f60a Test des endpoints Sentiment...")
  File "C:\Users\soufi\AppData\Local\Programs\Python\Python312\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f60a' in position 0: character maps to <undefined>
[START] Démarrage des tests de l'API NewsAI à l'adresse: http://localhost:8000
[TIMEOUT] Timeout par requête: 10s
----------------------------------------------------------------------
[INFO] Récupération des données de test...
[INFO] Test des endpoints Health & Monitoring...
[INFO] Test des endpoints Articles...
[EMPTY_RESPONSE] EMPTY RESPONSE GET /api/v1/articles?q=test&has_full_text=true
    Status: 200 | Time: 0.00s | Réponse nulle ou vide
    [RESPONSE] Réponse API (aperçu):
[]

[INFO] Test des endpoints Search...
[INFO] Test des endpoints Sources...
[INFO] Test des endpoints Summaries...
[FAIL] FAIL GET /api/v1/summaries?limit=3
    Status: 0 | Time: 10.25s | Timeout

[FAIL] FAIL GET /api/v1/summaries?since_hours=48&lang=fr
    Status: 0 | Time: 11.01s | Timeout

[FAIL] FAIL GET /api/v1/summaries/general?target_sentences=5
    Status: 0 | Time: 10.99s | Timeout

[WARN] WARN GET /api/v1/summaries/trending?since_hours=24
    Status: 404 | Time: 0.01s | Not found - 404
    [RESPONSE] Réponse API (aperçu):
{
  "detail": "Not Found"
}

[FAIL] FAIL GET /api/v1/summaries/source/www.lendingtree.com
    Status: 0 | Time: 10.99s | Timeout

[INFO] Test des endpoints Synthesis...
[FAIL] FAIL GET /api/v1/synthesis?since_hours=24&limit_docs=5
    Status: 0 | Time: 10.00s | Timeout

[FAIL] FAIL GET /api/v1/synthesis?q=test&lang=fr
    Status: 0 | Time: 10.01s | Timeout

[FAIL] FAIL GET /api/v1/synthesis?source_id=1
    Status: 0 | Time: 11.00s | Timeout

[INFO] Test des endpoints Topics...
[EMPTY_RESPONSE] EMPTY RESPONSE GET /api/v1/topics
    Status: 200 | Time: 0.02s | Réponse nulle ou vide
    [RESPONSE] Réponse API (aperçu):
[]

[INFO] Test des endpoints Clusters...
[EMPTY_RESPONSE] EMPTY RESPONSE GET /api/v1/clusters?limit_clusters=5
    Status: 200 | Time: 0.01s | Réponse nulle ou vide
    [RESPONSE] Réponse API (aperçu):
[]

[EMPTY_RESPONSE] EMPTY RESPONSE GET /api/v1/clusters?since_hours=24
    Status: 200 | Time: 0.01s | Réponse nulle ou vide
    [RESPONSE] Réponse API (aperçu):
[]


[UNEXPECTED ERROR] lors de l'exécution des tests: 'charmap' codec can't encode character '\U0001f60a' in position 0: character maps to <undefined>

[DETAIL] DÉTAIL PAR ENDPOINT
-----------------------------------------------------------------------------------------------------------------------------------
| Statut           | Méthode | Endpoint                                                   | Code | Temps  | Détail                |
-----------------------------------------------------------------------------------------------------------------------------------
| [PASS]           | GET     | /health                                                    | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /health/detailed                                           | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /                                                          | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/system/status                                      | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/articles                                           | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/articles?limit=5&lang=fr                           | 200  | 0.01s  | Success - 200         |
| [EMPTY_RESPONSE] | GET     | /api/v1/articles?q=test&has_full_text=true                 | 200  | 0.00s  | Réponse nulle ou vide |
| [PASS]           | GET     | /api/v1/articles?topic=tech&order=asc                      | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/articles/55                                        | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search?q=test                                      | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search?q=macron&lang=fr&limit=5                    | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search/semantic?q=intelligence&k=5                 | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search/entities?entity_type=PERSON&since_days=7    | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search/entities?entity_type=ORG&entity_name=OpenAI | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/search/similar/55                                  | 200  | 0.01s  | Success - 200         |
| [PASS]           | GET     | /api/v1/sources                                            | 200  | 0.00s  | Success - 200         |
| [PASS]           | GET     | /api/v1/sources/1                                          | 200  | 0.00s  | Success - 200         |
| [PASS]           | POST    | /api/v1/sources/refresh                                    | 200  | 0.03s  | Success - 200         |
| [FAIL]           | GET     | /api/v1/summaries?limit=3                                  | 0    | 10.25s | Timeout               |
| [FAIL]           | GET     | /api/v1/summaries?since_hours=48&lang=fr                   | 0    | 11.01s | Timeout               |
| [FAIL]           | GET     | /api/v1/summaries/general?target_sentences=5               | 0    | 10.99s | Timeout               |
| [WARN]           | GET     | /api/v1/summaries/trending?since_hours=24                  | 404  | 0.01s  | Not found - 404       |
| [FAIL]           | GET     | /api/v1/summaries/source/www.lendingtree.com               | 0    | 10.99s | Timeout               |
| [FAIL]           | GET     | /api/v1/synthesis?since_hours=24&limit_docs=5              | 0    | 10.00s | Timeout               |
| [FAIL]           | GET     | /api/v1/synthesis?q=test&lang=fr                           | 0    | 10.01s | Timeout               |
| [FAIL]           | GET     | /api/v1/synthesis?source_id=1                              | 0    | 11.00s | Timeout               |
| [EMPTY_RESPONSE] | GET     | /api/v1/topics                                             | 200  | 0.02s  | Réponse nulle ou vide |
| [EMPTY_RESPONSE] | GET     | /api/v1/clusters?limit_clusters=5                          | 200  | 0.01s  | Réponse nulle ou vide |
| [EMPTY_RESPONSE] | GET     | /api/v1/clusters?since_hours=24                            | 200  | 0.01s  | Réponse nulle ou vide |
-----------------------------------------------------------------------------------------------------------------------------------

======================================================================
[SUMMARY] RÉSUMÉ COMPLET DES TESTS
======================================================================
Total tests: 29
[SUCCESS] Succès complets: 17
[FAILED] Échecs techniques: 7
[CONTENT_FAIL] Échecs de contenu: 0
[WARNED] Avertissements (e.g., 404): 1
[EMPTY] Réponses vides/nulles: 4
[STATS] Taux de succès global: 58.6%
[QUALITY] Taux de qualité (hors 404): 60.7%
[TIME] Temps moyen: 2.57s

[SLOW_ENDPOINTS] Endpoints les plus lents:
    /api/v1/summaries?since_hours=48&lang=fr: 11.01s
    /api/v1/synthesis?source_id=1: 11.00s
    /api/v1/summaries/general?target_sentences=5: 10.99s

[EMPTY_ENDPOINTS] Endpoints avec réponses vides ou nulles:
    /api/v1/articles?q=test&has_full_text=true: Réponse nulle ou vide
    /api/v1/topics: Réponse nulle ou vide
    /api/v1/clusters?limit_clusters=5: Réponse nulle ou vide
    /api/v1/clusters?since_hours=24: Réponse nulle ou vide

[FAILED] Échecs techniques:
    /api/v1/summaries?limit=3: Timeout
    /api/v1/summaries?since_hours=48&lang=fr: Timeout
    /api/v1/summaries/general?target_sentences=5: Timeout
    /api/v1/summaries/source/www.lendingtree.com: Timeout
    /api/v1/synthesis?since_hours=24&limit_docs=5: Timeout
    /api/v1/synthesis?q=test&lang=fr: Timeout
    /api/v1/synthesis?source_id=1: Timeout

======================================================================

[ALERT] DES TESTS ONT ÉCHOUÉ OU PRÉSENTENT DES PROBLÈMES DE CONTENU.
